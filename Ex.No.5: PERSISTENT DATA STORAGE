Ex.No.5: PERSISTENT DATA STORAGE 
 
activity_main.xml:

<?xml version="1.0" encoding="utf-8"?> 
<androidx.constraintlayout.widget.ConstraintLayout 
xmlns:android="http://schemas.android.com/apk/res/android" 
    xmlns:app="http://schemas.android.com/apk/res-auto" 
    xmlns:tools="http://schemas.android.com/tools" 
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    tools:context=".MainActivity"> 
 
    <RelativeLayout 
        android:id="@+id/relativeLayout" 
        android:layout_width="368dp" 
        android:layout_height="495dp" 
        android:layout_marginStart="8dp" 
        android:layout_marginTop="8dp" 
        app:layout_constraintStart_toStartOf="parent" 
        app:layout_constraintTop_toTopOf="parent"> 
 
        <TextView 
            android:id="@+id/f1" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignStart="@+id/b1" 
            android:layout_alignParentTop="true" 
            android:layout_marginTop="65dp" 
            android:text="FirstName" /> 
 
        <TextView 
            android:id="@+id/l1" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_below="@+id/e1" 
            android:layout_alignStart="@+id/f1" 
            android:layout_marginTop="16dp" 
            android:text="LastName" /> 
 
        <TextView 
            android:id="@+id/m1" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_below="@+id/e2" 
            android:layout_alignStart="@+id/b1" 
            android:layout_marginTop="19dp" 
            android:text="MailId" /> 
 
        <EditText 
            android:id="@+id/e1" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignTop="@+id/f1" 
            android:layout_alignParentEnd="true" 
            android:layout_marginEnd="24dp" 
            android:ems="10" 
            android:inputType="textPersonName" /> 
 
        <EditText 
            android:id="@+id/e2" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignStart="@+id/e1" 
            android:layout_alignTop="@+id/l1" 
            android:ems="10" 
            android:inputType="textPersonName" /> 
 
        <EditText 
            android:id="@+id/e3" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignStart="@+id/e2" 
            android:layout_alignTop="@+id/m1" 
            android:ems="10" 
            android:inputType="textPersonName" /> 
 
        <Button 
            android:id="@+id/b1" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_below="@+id/m1" 
            android:layout_marginTop="52dp" 
            android:layout_toStartOf="@+id/e3" 
            android:text="Add" /> 
 
        <Button 
            android:id="@+id/b2" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignTop="@+id/b1" 
            android:layout_centerHorizontal="true" 
            android:text="Close" /> 
 
        <Button 
            android:id="@+id/b3" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignBaseline="@+id/b2" 
            android:layout_alignBottom="@+id/b2" 
            android:layout_marginStart="12dp" 
            android:layout_toEndOf="@+id/b2" 
            android:text="Show" /> 
    </RelativeLayout> 
    3 
</androidx.constraintlayout.widget.ConstraintLayout> 


activity_main2.xml:

<?xml version="1.0" encoding="utf-8"?> 
<androidx.constraintlayout.widget.ConstraintLayout 
xmlns:android="http://schemas.android.com/apk/res/android" 
    xmlns:app="http://schemas.android.com/apk/res-auto" 
    xmlns:tools="http://schemas.android.com/tools" 
    android:layout_width="match_parent" 
    android:layout_height="match_parent" 
    tools:context=".MainActivity2"> 
 
    <RelativeLayout 
        android:id="@+id/relativeLayout2" 
        android:layout_width="368dp" 
        android:layout_height="495dp" 
        android:layout_marginStart="8dp" 
        android:layout_marginTop="8dp" 
        app:layout_constraintStart_toStartOf="parent" 
        app:layout_constraintTop_toTopOf="parent"> 
 
        <TextView 
            android:id="@+id/f2" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignParentTop="true" 
            android:layout_marginTop="68dp" 
            android:layout_marginEnd="32dp" 
            android:layout_toStartOf="@+id/e4" 
            android:text="FirstName" /> 
 
        <EditText 
            android:id="@+id/e4" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignStart="@+id/b5" 
            android:layout_alignTop="@+id/f2" 
            android:ems="10" 
            android:inputType="textPersonName" /> 
 
        <TextView 
            android:id="@+id/l2" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_below="@+id/e4" 
            android:layout_alignStart="@+id/f2" 
            android:layout_marginTop="20dp" 
            android:text="LastName" /> 
 
        <EditText 
            android:id="@+id/e5" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignStart="@+id/e4" 
            android:layout_alignTop="@+id/l2" 
            android:ems="10" 
            android:inputType="textPersonName" /> 
 
        <TextView 
            android:id="@+id/m2" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_below="@+id/e5" 
            android:layout_alignStart="@+id/l2" 
            android:layout_marginTop="21dp" 
            android:text="MailId" /> 
 
        <EditText 
            android:id="@+id/e6" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignStart="@+id/e5" 
            android:layout_alignTop="@+id/m2" 
            android:ems="10" 
            android:inputType="textPersonName" /> 
 
        <Button 
            android:id="@+id/b4" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_below="@+id/e6" 
            android:layout_alignStart="@+id/m2" 
            android:layout_marginTop="35dp" 
            android:text="previous" /> 
 
        <Button 
            android:id="@+id/b5" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignBottom="@+id/b4" 
            android:layout_centerHorizontal="true" 
            android:text="Next" /> 
 
        <Button 
            android:id="@+id/b6" 
            android:layout_width="wrap_content" 
            android:layout_height="wrap_content" 
            android:layout_alignBaseline="@+id/b5" 
            android:layout_alignBottom="@+id/b5" 
            android:layout_marginStart="13dp" 
            android:layout_toEndOf="@+id/b5" 
            android:text="Back" /> 
    </RelativeLayout> 
 
</androidx.constraintlayout.widget.ConstraintLayout> 


MainActivity.java: 

package com.example.ex5; 
 
import android.content.Intent; 
import android.database.sqlite.SQLiteDatabase; 
import android.os.Bundle; 
import android.view.View; 
import android.widget.Button; 
import android.widget.EditText; 
import android.widget.Toast; 
 
import androidx.activity.EdgeToEdge; 
import androidx.appcompat.app.AppCompatActivity; 
import androidx.core.graphics.Insets; 
import androidx.core.view.ViewCompat; 
import androidx.core.view.WindowInsetsCompat; 
 
public class MainActivity extends AppCompatActivity { 
    SQLiteDatabase db; 
    String f1,l1,m1; 
    EditText e1,e2,e3; 
    Button add,close,show; 
    @Override 
    protected void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_main); 
        db=openOrCreateDatabase("Mydb",MODE_PRIVATE,null); 
        db.execSQL("CREATE TABLE IF NOT EXISTS student(fname VARCHAR, lname 
VARCHAR, email VARCHAR);"); 
        add=(Button)findViewById(R.id.b1); 
        close=(Button)findViewById(R.id.b2); 
        show=(Button)findViewById(R.id.b3); 
        add.setOnClickListener(new View.OnClickListener() { 
            @Override 
            public void onClick(View view) { 
                e1=(EditText)findViewById(R.id.e1); 
                e2=(EditText)findViewById(R.id.e2); 
                e3=(EditText)findViewById(R.id.e3); 
                f1=e1.getText().toString(); 
                l1=e2.getText().toString(); 
                m1=e3.getText().toString(); 
                db.execSQL("INSERT INTO student VALUES ('"+f1+"','"+l1+"','"+m1+"');"); 
                Toast.makeText(getApplicationContext(), 
                        "Row Inserted", Toast.LENGTH_LONG).show(); 
            } 
        }); 
        close.setOnClickListener(new View.OnClickListener() { 
            @Override 
            public void onClick(View view) { 
                System.exit(0); 
            } 
        }); 
        show.setOnClickListener(new View.OnClickListener() 
        { @Override 
        public void onClick(View view) { 
            Intent i=new Intent(getApplicationContext(), MainActivity2.class); 
            startActivity(i); 
        } 
        }); 
    } 
} 


MainActivity2.java: 

package com.example.ex5; 
 
import android.content.Intent; 
import android.database.Cursor; 
import android.database.sqlite.SQLiteDatabase; 
import android.os.Bundle; 
import android.view.View; 
import android.widget.Button; 
import android.widget.EditText; 
import android.widget.Toast; 
 
import androidx.activity.EdgeToEdge; 
import androidx.appcompat.app.AppCompatActivity; 
import androidx.core.graphics.Insets; 
import androidx.core.view.ViewCompat; 
import androidx.core.view.WindowInsetsCompat; 
 
 
 
public class MainActivity2 extends AppCompatActivity { 
    EditText fn,ln,em; 
    Button prev,next,back; 
    SQLiteDatabase db; 
    @Override 
    protected void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.activity_main2); 
        fn=(EditText)findViewById(R.id.e4); 
        ln=(EditText)findViewById(R.id.e5); 
        em=(EditText)findViewById(R.id.e6); 
        prev=(Button)findViewById(R.id.b4); 
        next=(Button)findViewById(R.id.b5); 
        back=(Button)findViewById(R.id.b6); 
        db=openOrCreateDatabase("Mydb",MODE_PRIVATE,null); 
        final Cursor c=db.rawQuery("select * from student",null); 
        c.moveToFirst(); 
        back.setOnClickListener(new View.OnClickListener() 
        { @Override 
        public void onClick(View view) { 
            Intent i1=new Intent(getApplicationContext(),MainActivity.class); 
            startActivity(i1); 
        } 
        }); 
        prev.setOnClickListener(new View.OnClickListener() 
        { @Override 
        public void onClick(View view) { 
            try { 
                c.moveToPrevious(); 
                fn.setText(c.getString(c.getColumnIndexOrThrow("fname"))); 
                ln.setText(c.getString(c.getColumnIndexOrThrow("lname"))); 
                em.setText(c.getString(c.getColumnIndexOrThrow("email"))); 
            } 
            catch (Exception e){ 
                Toast.makeText(getApplicationContext(), 
                        "First Record",Toast.LENGTH_SHORT).show(); 
                e.printStackTrace(); 
            } 
        } 
        }); 
        next.setOnClickListener(new View.OnClickListener() { 
            @Override 
            public void onClick(View view) { 
                try{ 
                    c.moveToNext(); 
                    fn.setText(c.getString(c.getColumnIndexOrThrow("fname"))); 
                    ln.setText(c.getString(c.getColumnIndexOrThrow("lname"))); 
                    em.setText(c.getString(c.getColumnIndexOrThrow("email"))); 
                } 
                catch (Exception e){ 
                    Toast.makeText(getApplicationContext(), 
                            "Last Record",Toast.LENGTH_SHORT).show(); 
                } 
            } 
        }); 
    } 
} 
 
 
 
 
 
 
 
 
 
 
OUTPUT: 
 
                    
 
 
                             
